<!DOCTYPE html>
<html>
    <head>
        <title>Openweatherapp Application Programming Interface</title>
    </head>
    <body>

        <script type="text/javascript">

            // AJAX 

            // initialize the HTTP Request 

            var xmlhttp = new XMLHttpRequest();

            xmlhttp.open("GET","./l12sampledata.json",false); // false mean no synchronize
            xmlhttp.send();

            if(xmlhttp.readyState === 4 && xmlhttp.status === 200){

                // var result = xmlhttp;
                // console.log(result);

                var result = xmlhttp.responseText;
                // console.log(result);
            }

            // console.log(result);
            // console.log(typeof result);

            result = JSON.parse(result);

            // console.log(result);
            // console.log(typeof result);

            // console.log(result.weather);
            // console.log(result.weather[0].main);
            // console.log(result.weather[0]["main"]);

            // console.log(result.wind.speed);
            // console.log(result.wind["speed"]);
            // console.log(result["wind"]["speed"]);

            // console.log(result.name);

            // => fetch() 

            // Syntax: 

            // fetch(url)
            // .then(response=>response.json())
            // .then(data)
            // .catch(error=>console.log(err))

            var url = "./l12sampledata.json";

            fetch(url).then(response=>{
                // console.log(response);
                // console.log(response.headers.get('Content-type')); //application/json; charset=UTF-8
                // console.log(response.type); //basic 
                return response.json();
            })
            .then(data=>{
                // console.log(data);
                // console.log(typeof data); //object

                // console.log(data.weather);
                // console.log(data.weather[0].main);
                // console.log(data.weather[0]["main"]);

                // console.log(data.wind.speed);
                // console.log(data.wind["speed"]);
                // console.log(data["wind"]["speed"]);

                console.log(data.name);
            })
            .catch(err=>{
                console.log(err);
            })

            fetch(url).then(response=>response.json()).then(data=>{
                console.log(data);
                console.log(data.wind.speed);
                console.log(data.name);
            }).catch(err=>err);
            
        </script>
    </body>
</html>

